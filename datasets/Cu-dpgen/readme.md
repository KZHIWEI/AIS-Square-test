2# README

## Introduction

This is the dataset of n-dodecane in **[1]**. 

## Generation Approach
All data are generated by DP-GEN. **[2]**  
The DP-GEN workflow contains a series of successive iterations. Each iteration is composed of three steps: exploration, labeling, and training.  
*Exploration:* We take the copper system as an example, for which the user targets at a uniform accuracy over the thermodynamic range of temperature from 0 K to 2Tm and pressure from 1 Bar to 50,000 Bar, where $T_m$ = 1357.77 K denotes the melting point at the ambient condition. The exploration strategy can be designed as follows. We divide the temperature range [50 K, 2$T_m$ ) equally into four intervals, i.e. [50 K, 0.5$T_m$ ), [0.5$T_m$, $T_m$ ), [$T_m$, 1.5$T_m$ ), [1.5$T_m$, 2$T_m$ ), and explore them successively. In each temperature interval we run 8 iterations with increasing number of MD simulations and increasing length of trajectories. For example in the first iteration, 600 MD simulations of 2 ps are performed, while in the last iteration the number of MD simulation increases to 2400 and the length trajectory increases to 6 ps. In each iteration, 5  temperatures conditions that evenly divide the temperature interval and 8 pressure conditions, i.e. 1, 10 100, 1000, 5000, 10,000, 20,000 and 50,000 Bar, are explored simultaneously by Isothermal–isobaric (NPT) DP-based MD simulations. The initial configurations of these MD simulations are prepared by randomly perturbing fully relaxed standard crystal structures, including face-centered cubic (fcc), hexagonalclosed-packed (hcp), and body-centered cubic (bcc) structures. The configurations along MD trajectories are recorded at a time interval of ∆t = 0.02 ps, and those with model deviation 0.05 eV/Å ≤ $ϵ_{n∆t}$ < 0.20 eV/Å are selected and passed to the labeling stage. General instructions on the settings of the bounds can be referred to the end of this section.  
*Labeling:* This step calculates the reference ab initio energies $\tilde{E}$ and forces $\tilde{F}$ for the selected configurations $\cal{R}_{n∆t}$ from the exploration step. The process can be done by first-principles-based schemes, including quantum chemistry, quantum Monte Carlo, and DFT, etc. The results are called labels. These labels are then added into the training dataset, to be used later for retraining.  
*Training:* The DP model considers $E_ω$ as a sum of contributions from atomic local environments Ri , i.e. , $E_ω = ∑_iE^i_ω(\cal{R}^i)$. $\cal{R}^i$ contains the coordinates of $i$’s neighboring atoms within a $r_c$ cutoff radius, and it is mapped, through an embedding network, onto a so-called feature matrix $\cal{D}^i_ω$. Such a construction guarantees the invariance of the PES under translation, rotation, and permutation among identical particles. $\cal{D}^i_ω$ is then mapped, through a fitting network, to $E^i_ω$ . Since $ω$ is composed of the parameters in the embedding network and the fitting network, we also call it the network parameters.

## Data Format

The directory tree is as follows:

```
-- init
-- iter.xxxxxx
-- -- 02.fp
-- -- -- data.xxx
...
```

where each subdirectory contains unit systems in DeePMD format.

A pbc unit system usually has the following substructure:

```
-- type_map.raw
-- type.raw
-- nopbc
-- set.000/box.npy
-- set.000/coord.npy
-- set.000/energy.npy
-- set.000/force.npy
-- set.000/virial.npy
```

Format Description

| Name     | Property           | Raw file     | Unit | Shape                  | Description                                                  |
| -------- | ------------------ | ------------ | ---- | ---------------------- | ------------------------------------------------------------ |
| type     | Atom type indexes  | type.raw     |      | Natoms                 | Integers that start with 0, represent the atomic type corresponding to type_map.raw |
| type_map | Atom type names    | type_map.raw |      | Ntypes                 | Atom names that map to atom type, which is unnecessart to be contained in the periodic table |
| nopbc    | Non-periodic system| nopbc        |Required|                      |If True, this system is non-periodic; otherwise it's periodic |
| coord    | Atomic coordinates | coord.npy    | Å    | Nframes \* Natoms \* 3 | The atomic coordinates                                       |
| box      | Boxes              | box.npy      | Å    | Nframes \* 3 \* 3      | The box axes in the order `XX XY XZ YX YY YZ ZX ZY ZZ`       |
| energy   | Frame energies     | energy.npy   | eV   | Nframes                | The potential energy of snapshot                             |
| force    | Atomic forces      | force.npy    | eV/Å | Nframes \* Natoms \* 3 | The atomic forces                                            |
| virial   | Frame virial       | virial.npy   | eV   | Nframes * 9            | The virial frames are in the order `XX XY XZ YX YY YZ ZX ZY ZZ` |

Check [here](https://github.com/deepmodeling/deepmd-kit/blob/master/doc/data/system.md) for more details.

## References
**[1]** Zhang, Yuzhi, et al. "DP-GEN: A concurrent learning platform for the generation of reliable deep learning based potential energy models." Computer Physics Communications 253 (2020): 107206.  
**[2]** Zhang, Yuzhi, et al. "DP-GEN: A concurrent learning platform for the generation of reliable deep learning based potential energy models." Computer Physics Communications 253 (2020): 107206.


